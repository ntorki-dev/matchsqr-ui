 <!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Match Square — Game MVP</title>
  <style>
    :root { --ink:#0f172a; --text:#111827; --muted:#6b7280; --brand:#0ea5e9; --ok:#16a34a; --danger:#ef4444; --bg:#ffffff; --panel:#fafafa; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text);line-height:1.45;}
    header{background:var(--ink);color:#fff;padding:12px 16px;display:flex;justify-content:space-between;align-items:center}
    .brand{font-weight:700}
    .main{max-width:1100px;margin:18px auto;padding:0 16px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}
    h2{margin:0 0 8px 0}
    .card{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:var(--panel)}
    .row{display:flex;gap:8px;flex-wrap:wrap}
    .btn{border:1px solid #e5e7eb;background:#fff;border-radius:10px;padding:8px 12px;cursor:pointer}
    .btn.primary{border-color:var(--brand);background:var(--brand);color:#fff}
    .btn.ok{border-color:var(--ok);color:#fff;background:var(--ok)}
    .btn.danger{border-color:var(--danger);color:#fff;background:var(--danger)}
    input{border:1px solid #d1d5db;border-radius:8px;padding:8px;width:100%}
    .meta{color:var(--muted);font-size:14px}
    .mono{font-family:ui-monospace,Menlo,Consolas,monospace;background:#f7f7f7;border-radius:8px;padding:8px;min-height:80px;overflow:auto}
    ul.people{list-style:none;padding:0;margin:6px 0 0 0}
    ul.people li{padding:4px 0;border-bottom:1px dashed #e5e7eb}
    .question{font-size:18px}
    .hidden{display:none}
  </style>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="./config.js"></script>
</head>
<body>
  <header class="topbar" style="display:flex;align-items:center;justify-content:space-between;gap:12px;">
  <a id="brandLink" href="#" class="brand-link" style="display:flex;align-items:center;gap:8px;text-decoration:none;color:inherit">
    <img src="assets/logo.png" alt="Matchsqr logo" width="40" height="40" style="display:block"/>
    <span class="brand-text" style="font-weight:600">Matchsqr</span>
  </a>
  <div class="topbar-right" style="display:flex;align-items:center;gap:8px;">
    <!-- IMPORTANT: no class, no background -->
    <button id="btnAuth" aria-label="Account/Login"></button>
  </div>
</header>

  <main class="main">
    <section id="homeSection" class="card">
      <h2>Real connections first</h2>
      <p class="meta">Host a room, invite guests with a 6-digit code, reveal cards, and talk.</p>
      <div class="row" style="margin-top:8px">
        <button id="hostBtn" class="btn primary">Host</button>
        <button id="joinBtn" class="btn">Join</button>
      </div>
    </section>

    <div class="grid">
      <!-- HOST PANEL -->
      <section id="hostSection" class="card hidden">
        <h2>Host</h2>
<!-- Login moved to /#/account/login -->
<div class="row" style="margin-top:8px">
          <button id="createGameBtn" class="btn primary">Create Game</button>
          <button id="startGameBtn" class="btn ok">Start</button>
          <button id="nextCardBtn" class="btn" disabled>Reveal next card</button>
          <button id="endAnalyzeBtn" class="btn danger">End & analyze</button>
        </div>

        <div class="row" style="margin-top:8px">
          <div class="card" style="flex:1">
            <div><strong>Code:</strong> <span id="gameCodeOut">—</span></div>
            <div><strong>Game ID:</strong> <span id="gameIdOut">—</span></div>
            <div><strong>Status:</strong> <span id="statusOut">—</span></div>
            <div><strong>Ends at:</strong> <span id="endsAtOut">—</span></div>
            <div><strong>Time left:</strong> <span id="timeLeft">—</span></div>
          </div>
          <div class="card" style="flex:1">
            <div class="meta">Participants (<span id="hostPeopleCount">0</span>)</div>
            <ul id="hostPeople" class="people"></ul>
          </div>
        </div>

        <div class="card" style="margin-top:8px">
          <div class="meta">Current card</div>
          <div id="questionText" class="question">—</div>
          <div id="questionClar" class="meta" style="margin-top:6px"></div>
        </div>

        <pre id="hostLog" class="mono" style="margin-top:8px">Ready.</pre>
      </section>

      <!-- GUEST PANEL -->
      <section id="joinSection" class="card hidden">
        <h2>Join</h2>
        <div class="row">
          <input id="guestName" placeholder="Your name (guest)"/>
          <input id="joinCode" placeholder="6-digit code"/>
          <button id="joinRoomBtn" class="btn">Join</button>
        </div>

        <div class="row" style="margin-top:8px">
          <div class="card" style="flex:1">
            <div><strong>Status:</strong> <span id="gStatus">—</span></div>
            <div><strong>Ends at:</strong> <span id="gEndsAt">—</span></div>
            <div><strong>Time left:</strong> <span id="gTimeLeft">—</span></div>
          </div>
          <div class="card" style="flex:1">
            <div class="meta">Participants (<span id="guestPeopleCount">0</span>)</div>
            <ul id="guestPeople" class="people"></ul>
          </div>
        </div>

        <div class="card" style="margin-top:8px">
          <div class="meta">Current card</div>
          <div id="gQuestionText" class="question">—</div>
          <div id="gQuestionClar" class="meta" style="margin-top:6px"></div>
        </div>

        <pre id="joinLog" class="mono" style="margin-top:8px"></pre>
      </section>
    </div>
  </main>

  <script src="./app.js"></script>
</body>
</html>
